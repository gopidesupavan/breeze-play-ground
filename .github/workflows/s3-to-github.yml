name: Sync S3 to GitHub
on: # yamllint disable-line rule:truthy
  workflow_dispatch:
jobs:
  s3-to-github:
    name: S3 to GitHub
    runs-on: ubuntu-latest
    steps:
      - name: Install AWS CLI v2
        run: |
          curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o /tmp/awscliv2.zip
          unzip -q /tmp/awscliv2.zip -d /tmp
          rm /tmp/awscliv2.zip
          sudo /tmp/aws/install --update
          rm -rf /tmp/aws/

      - name: Syncing
        run: |
          mkdir -p /mnt/docs-archive
          aws s3 sync s3://staging-docs-airflow-apache-org/docs/ /mnt/docs-archive
          ls -la /mnt/docs-archive